p8105_hw2_lc3807
================
Linshen Cai
2023-10-04

## problem 0

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

## problem 1

``` r
# creat dataframe of month
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

#import data frame and clean it as follow
pols = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_num)`

First, clean the data in pols-month.csv, which shows how many national
politicians are now affiliated with either the Democratic Party or the
Republican Party. There are several instances where `prez_gop` equals
`2`; these are the months in which Ford took office after Nixon
resigned. We code these as `gop` (the same as values when `prez_gop` is
`1`) in the new `president` variable established as part of our data
cleansing.

``` r
snp = 
  read_csv(
    "./data/fivethirtyeight_datasets/snp.csv",
    col_types = cols(date = col_date(format = "%m/%d/%y"))) |>
  separate(date, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    year = if_else(year > 2023, year - 100, year)) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, close) 
```

    ## Joining with `by = join_by(month_num)`

Second, we also clean the 538 `snp` data, which contains information
related to Standard & Poor’s stock market index.

``` r
unemployment = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, unemployment)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_abb)`

Finally, we tidy the `unemployment` data so that it can be merged with
the previous datasets.

``` r
data_538 = 
  left_join(pols, snp) |>
  left_join(x = _, y = unemployment)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
str(data_538)
```

    ## tibble [822 × 13] (S3: tbl_df/tbl/data.frame)
    ##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
    ##  $ month       : chr [1:822] "January" "February" "March" "April" ...
    ##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
    ##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
    ##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
    ##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
    ##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
    ##  $ president   : chr [1:822] "dem" "dem" "dem" "dem" ...
    ##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
    ##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...

We merge the three datasets!

The ‘pols’ data contains 822 observations and 11 variables, and it
provides information on the distribution of party identification
(Democrat or Republican) among governors and senators for a certain year
from years.The`snp`data consists of 787 observations and 3 variables,
which range from years to months.The `unemployment` data includes 816
observations and 3 variables with a range of years.

## Problem 2

``` r
mr_trash_wheel_df = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx",
             sheet = "Mr. Trash Wheel",
             range = "A2:N587",
             na = c("", "NA", "N/A")
             ) |> 
  janitor::clean_names() |> 
  mutate(homes_powered = weight_tons * 500 / 30, 
         trash_wheel_type = "Mr. Trash Wheel"
         ) |> 
  select(trash_wheel_type, everything())


mr_trash_wheel_df
```

    ## # A tibble: 585 × 15
    ##    trash_wheel_type dumpster month year  date                weight_tons
    ##    <chr>               <dbl> <chr> <chr> <dttm>                    <dbl>
    ##  1 Mr. Trash Wheel         1 May   2014  2014-05-16 00:00:00        4.31
    ##  2 Mr. Trash Wheel         2 May   2014  2014-05-16 00:00:00        2.74
    ##  3 Mr. Trash Wheel         3 May   2014  2014-05-16 00:00:00        3.45
    ##  4 Mr. Trash Wheel         4 May   2014  2014-05-17 00:00:00        3.1 
    ##  5 Mr. Trash Wheel         5 May   2014  2014-05-17 00:00:00        4.06
    ##  6 Mr. Trash Wheel         6 May   2014  2014-05-20 00:00:00        2.71
    ##  7 Mr. Trash Wheel         7 May   2014  2014-05-21 00:00:00        1.91
    ##  8 Mr. Trash Wheel         8 May   2014  2014-05-28 00:00:00        3.7 
    ##  9 Mr. Trash Wheel         9 June  2014  2014-06-05 00:00:00        2.52
    ## 10 Mr. Trash Wheel        10 June  2014  2014-06-11 00:00:00        3.76
    ## # ℹ 575 more rows
    ## # ℹ 9 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   plastic_bags <dbl>, wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>

``` r
prof_trash_df = 
  read_excel(
    "./data/202309 Trash Wheel Collection Data.xlsx",
    sheet = "Professor Trash Wheel",
    range = "A2:M109",
    na = c("", "NA", "N/A")
    ) |> 
  janitor::clean_names() |> 
  mutate(
    homes_powered = weight_tons * 500 / 30,
    trash_wheel_type = "Professor Trash Wheel"
    ) |> 
  select(trash_wheel_type, everything())
  

prof_trash_df
```

    ## # A tibble: 107 × 14
    ##    trash_wheel_type      dumpster month     year date                weight_tons
    ##    <chr>                    <dbl> <chr>    <dbl> <dttm>                    <dbl>
    ##  1 Professor Trash Wheel        1 January   2017 2017-01-02 00:00:00        1.79
    ##  2 Professor Trash Wheel        2 January   2017 2017-01-30 00:00:00        1.58
    ##  3 Professor Trash Wheel        3 February  2017 2017-02-26 00:00:00        2.32
    ##  4 Professor Trash Wheel        4 February  2017 2017-02-26 00:00:00        3.72
    ##  5 Professor Trash Wheel        5 February  2017 2017-02-28 00:00:00        1.45
    ##  6 Professor Trash Wheel        6 March     2017 2017-03-30 00:00:00        1.71
    ##  7 Professor Trash Wheel        7 April     2017 2017-04-01 00:00:00        1.82
    ##  8 Professor Trash Wheel        8 April     2017 2017-04-20 00:00:00        2.37
    ##  9 Professor Trash Wheel        9 May       2017 2017-05-10 00:00:00        2.64
    ## 10 Professor Trash Wheel       10 May       2017 2017-05-26 00:00:00        2.78
    ## # ℹ 97 more rows
    ## # ℹ 8 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   plastic_bags <dbl>, wrappers <dbl>, homes_powered <dbl>

``` r
gwynnda_trash_df = 
  read_excel(
    "./data/202309 Trash Wheel Collection Data.xlsx",
    sheet = "Gwynnda Trash Wheel",
    range = "A2:L159",
    na = c("", "NA", "N/A")
    ) |> 
  janitor::clean_names() |> 
  mutate(
    homes_powered = weight_tons * 500 / 30,
    trash_wheel_type = "Gwynnda Trash Wheel"
    ) |> 
  select(trash_wheel_type, everything())

gwynnda_trash_df
```

    ## # A tibble: 157 × 13
    ##    trash_wheel_type    dumpster month   year date                weight_tons
    ##    <chr>                  <dbl> <chr>  <dbl> <dttm>                    <dbl>
    ##  1 Gwynnda Trash Wheel        1 July    2021 2021-07-03 00:00:00        0.93
    ##  2 Gwynnda Trash Wheel        2 July    2021 2021-07-07 00:00:00        2.26
    ##  3 Gwynnda Trash Wheel        3 July    2021 2021-07-07 00:00:00        1.62
    ##  4 Gwynnda Trash Wheel        4 July    2021 2021-07-16 00:00:00        1.76
    ##  5 Gwynnda Trash Wheel        5 July    2021 2021-07-30 00:00:00        1.53
    ##  6 Gwynnda Trash Wheel        6 August  2021 2021-08-11 00:00:00        2.06
    ##  7 Gwynnda Trash Wheel        7 August  2021 2021-08-14 00:00:00        1.9 
    ##  8 Gwynnda Trash Wheel        8 August  2021 2021-08-16 00:00:00        2.16
    ##  9 Gwynnda Trash Wheel        9 August  2021 2021-08-16 00:00:00        2.6 
    ## 10 Gwynnda Trash Wheel       10 August  2021 2021-08-17 00:00:00        3.21
    ## # ℹ 147 more rows
    ## # ℹ 7 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>
