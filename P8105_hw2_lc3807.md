p8105_hw2_lc3807
================
Linshen Cai
2023-10-04

## problem 0

``` r
library(tidyverse)
library(readxl)
```

## problem 1

``` r
# creat dataframe of month
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

#import data frame and clean it as follow
pols = 
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

First, clean the data in pols-month.csv, which shows how many national
politicians are now affiliated with either the Democratic Party or the
Republican Party. There are several instances where `prez_gop` equals
`2`; these are the months in which Ford took office after Nixon
resigned. We code these as `gop` (the same as values when `prez_gop` is
`1`) in the new `president` variable established as part of our data
cleansing.

``` r
snp = 
  read_csv(
    "./data/fivethirtyeight_datasets/snp.csv",
    col_types = cols(date = col_date(format = "%m/%d/%y"))) |>
  separate(date, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    year = if_else(year > 2023, year - 100, year)) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, close) 
```

Second, we also clean the 538 `snp` data, which contains information
related to Standard & Poor’s stock market index.

``` r
unemployment = 
  read_csv("./data/fivethirtyeight_datasets/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, unemployment)
```

Finally, we tidy the `unemployment` data so that it can be merged with
the previous datasets.

``` r
data_538 = 
  left_join(pols, snp) |>
  left_join(x = _, y = unemployment)

str(data_538)
## tibble [822 × 13] (S3: tbl_df/tbl/data.frame)
##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
##  $ month       : chr [1:822] "January" "February" "March" "April" ...
##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
##  $ president   : chr [1:822] "dem" "dem" "dem" "dem" ...
##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...
```

We merge the three datasets!

The ‘pols’ data contains 822 observations and 11 variables, and it
provides information on the distribution of party identification
(Democrat or Republican) among governors and senators for a certain year
from years.The`snp`data consists of 787 observations and 3 variables,
which range from years to months.The `unemployment` data includes 816
observations and 3 variables with a range of years.

## Problem 2

First, I import Mr.Trash Wheel sheet from excel and omit non-data
entries

``` r

#import dataframe use read_excel

mr_trash_wheel_df = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx",
             sheet = "Mr. Trash Wheel",
             range = "A2:N586",
             na = c("", "NA", "N/A")
             ) |> 
  janitor::clean_names() |> 
  
  #re-calculate homes powered
  
  mutate(homes_powered = weight_tons * 500 / 30, 
         trash_wheel_type = "Mr. Trash Wheel",
         year = as.double(year)
         )|> 
  select(trash_wheel_type, everything())

mr_trash_wheel_df
## # A tibble: 584 × 15
##    trash_wheel_type dumpster month  year date                weight_tons
##    <chr>               <dbl> <chr> <dbl> <dttm>                    <dbl>
##  1 Mr. Trash Wheel         1 May    2014 2014-05-16 00:00:00        4.31
##  2 Mr. Trash Wheel         2 May    2014 2014-05-16 00:00:00        2.74
##  3 Mr. Trash Wheel         3 May    2014 2014-05-16 00:00:00        3.45
##  4 Mr. Trash Wheel         4 May    2014 2014-05-17 00:00:00        3.1 
##  5 Mr. Trash Wheel         5 May    2014 2014-05-17 00:00:00        4.06
##  6 Mr. Trash Wheel         6 May    2014 2014-05-20 00:00:00        2.71
##  7 Mr. Trash Wheel         7 May    2014 2014-05-21 00:00:00        1.91
##  8 Mr. Trash Wheel         8 May    2014 2014-05-28 00:00:00        3.7 
##  9 Mr. Trash Wheel         9 June   2014 2014-06-05 00:00:00        2.52
## 10 Mr. Trash Wheel        10 June   2014 2014-06-11 00:00:00        3.76
## # ℹ 574 more rows
## # ℹ 9 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
## #   plastic_bags <dbl>, wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>
```

Second, I import Professor Trash Wheel sheet from excel and omit
non-data entries.

``` r

#import dataframe use read_excel
prof_trash_df = 
  read_excel(
    "./data/202309 Trash Wheel Collection Data.xlsx",
    sheet = "Professor Trash Wheel",
    range = "A2:M108",
    na = c("", "NA", "N/A")
    ) |> 
  janitor::clean_names() |> 
  
#re-calculate homes powered
  mutate(
    homes_powered = weight_tons * 500 / 30,
    trash_wheel_type = "Professor Trash Wheel"
    ) |> 
  select(trash_wheel_type, everything())
  
prof_trash_df
## # A tibble: 106 × 14
##    trash_wheel_type      dumpster month     year date                weight_tons
##    <chr>                    <dbl> <chr>    <dbl> <dttm>                    <dbl>
##  1 Professor Trash Wheel        1 January   2017 2017-01-02 00:00:00        1.79
##  2 Professor Trash Wheel        2 January   2017 2017-01-30 00:00:00        1.58
##  3 Professor Trash Wheel        3 February  2017 2017-02-26 00:00:00        2.32
##  4 Professor Trash Wheel        4 February  2017 2017-02-26 00:00:00        3.72
##  5 Professor Trash Wheel        5 February  2017 2017-02-28 00:00:00        1.45
##  6 Professor Trash Wheel        6 March     2017 2017-03-30 00:00:00        1.71
##  7 Professor Trash Wheel        7 April     2017 2017-04-01 00:00:00        1.82
##  8 Professor Trash Wheel        8 April     2017 2017-04-20 00:00:00        2.37
##  9 Professor Trash Wheel        9 May       2017 2017-05-10 00:00:00        2.64
## 10 Professor Trash Wheel       10 May       2017 2017-05-26 00:00:00        2.78
## # ℹ 96 more rows
## # ℹ 8 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
## #   plastic_bags <dbl>, wrappers <dbl>, homes_powered <dbl>
```

Third, I import Gwynnda Trash Wheel sheet from excel and omit non-data
entries.

``` r

#import dataframe use read_excel
gwynnda_trash_df = 
  read_excel(
    "./data/202309 Trash Wheel Collection Data.xlsx",
    sheet = "Gwynnda Trash Wheel",
    range = "A2:L157",
    na = c("", "NA", "N/A")
    ) |> 
  janitor::clean_names() |> 
  
#re-calculate homes powered
  mutate(
    homes_powered = weight_tons * 500 / 30,
    trash_wheel_type = "Gwynnda Trash Wheel"
    ) |> 
  select(trash_wheel_type, everything())

gwynnda_trash_df
## # A tibble: 155 × 13
##    trash_wheel_type    dumpster month   year date                weight_tons
##    <chr>                  <dbl> <chr>  <dbl> <dttm>                    <dbl>
##  1 Gwynnda Trash Wheel        1 July    2021 2021-07-03 00:00:00        0.93
##  2 Gwynnda Trash Wheel        2 July    2021 2021-07-07 00:00:00        2.26
##  3 Gwynnda Trash Wheel        3 July    2021 2021-07-07 00:00:00        1.62
##  4 Gwynnda Trash Wheel        4 July    2021 2021-07-16 00:00:00        1.76
##  5 Gwynnda Trash Wheel        5 July    2021 2021-07-30 00:00:00        1.53
##  6 Gwynnda Trash Wheel        6 August  2021 2021-08-11 00:00:00        2.06
##  7 Gwynnda Trash Wheel        7 August  2021 2021-08-14 00:00:00        1.9 
##  8 Gwynnda Trash Wheel        8 August  2021 2021-08-16 00:00:00        2.16
##  9 Gwynnda Trash Wheel        9 August  2021 2021-08-16 00:00:00        2.6 
## 10 Gwynnda Trash Wheel       10 August  2021 2021-08-17 00:00:00        3.21
## # ℹ 145 more rows
## # ℹ 7 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
## #   polystyrene <dbl>, cigarette_butts <dbl>, plastic_bags <dbl>,
## #   wrappers <dbl>, homes_powered <dbl>
```

Finally, we merge all three dateframes above and calculate total weight
of trash collected by Professor Trash Wheel and the total number of
cigarette butts collected by Gwynnda in July of 2021.

``` r
# merge all three dataframes 
data_all = bind_rows(mr_trash_wheel_df, prof_trash_df, gwynnda_trash_df) 

data_all
## # A tibble: 845 × 15
##    trash_wheel_type dumpster month  year date                weight_tons
##    <chr>               <dbl> <chr> <dbl> <dttm>                    <dbl>
##  1 Mr. Trash Wheel         1 May    2014 2014-05-16 00:00:00        4.31
##  2 Mr. Trash Wheel         2 May    2014 2014-05-16 00:00:00        2.74
##  3 Mr. Trash Wheel         3 May    2014 2014-05-16 00:00:00        3.45
##  4 Mr. Trash Wheel         4 May    2014 2014-05-17 00:00:00        3.1 
##  5 Mr. Trash Wheel         5 May    2014 2014-05-17 00:00:00        4.06
##  6 Mr. Trash Wheel         6 May    2014 2014-05-20 00:00:00        2.71
##  7 Mr. Trash Wheel         7 May    2014 2014-05-21 00:00:00        1.91
##  8 Mr. Trash Wheel         8 May    2014 2014-05-28 00:00:00        3.7 
##  9 Mr. Trash Wheel         9 June   2014 2014-06-05 00:00:00        2.52
## 10 Mr. Trash Wheel        10 June   2014 2014-06-11 00:00:00        3.76
## # ℹ 835 more rows
## # ℹ 9 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
## #   plastic_bags <dbl>, wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>

# calculate total weight of trash collected by Professor Trash Wheel
total_prof_trash_weight = data_all |> 
  filter(trash_wheel_type == "Professor Trash Wheel") |> 
  pull(weight_tons) |> 
  sum()
total_prof_trash_weight
## [1] 216.26

# calculate total number of cigarette butts collected by Gwynnda in July of 2021
total_gwynnda_cigarette_butts_july = data_all |> 
  filter(trash_wheel_type == "Gwynnda Trash Wheel" & month == "July" & year == 2021) |> 
  pull(cigarette_butts) |> 
  sum()
total_gwynnda_cigarette_butts_july
## [1] 16300
```

The `mr_trash_wheel_df` data has 584 observations and 15 variables and
tells us about how many tons of garbage Mr trash wheel collects and what
types of garbage are included(each variables) for a given year from
years 2014 to 2023. The `prof_trash_df` data has 106 observations and 14
variables, ranging from years 2017 to 2023. The `gwynnda_trash_df` data
has 155 observations and 13 variables ranging from years 2021 to 2023.
After we combine three sheets, the `data_all` date fame has845
observations and 15 variables and contains all information about trash
collected from these three different trash wheels for a given year from
2014 to 2023. The total weight of trash collected by Professor Trash
Wheel are 216.26 and the total number of cigarette butts collected by
Gwynnda in July of 2021 are1.63^{4}.
